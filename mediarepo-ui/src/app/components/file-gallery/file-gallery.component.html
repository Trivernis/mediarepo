<div class="gallery-container" fxLayout="column">
  <button (click)="this.closeEvent.emit(this)" class="close-button" mat-icon-button>
    <mat-icon>close</mat-icon>
  </button>
  <div (dblclick)="this.selectedFile? this.fileDblClickEvent.emit(this.selectedFile.data) : null" class="file-full-view"
       fxFlex="80%">
    <div *ngIf="!this.fileContentUrl" class="url-loading-backdrop">
      <mat-progress-spinner color="primary" mode="indeterminate"></mat-progress-spinner>
    </div>
    <app-content-viewer *ngIf="this.fileContentUrl" [contentUrl]="this.fileContentUrl" [mimeType]="this.selectedFile!.data.mime_type"></app-content-viewer>
  </div>
  <mat-divider fxFlex></mat-divider>
  <div class="file-scroll-view" fxFlex="20%">
    <cdk-virtual-scroll-viewport #virtualScroll class="file-scroll-viewport" itemSize="260" maxBufferPx="3000"
                                 minBufferPx="1000" orientation="horizontal">
      <div *cdkVirtualFor="let entry of entries" class="file-item">
        <app-file-gallery-entry (fileSelectEvent)="onEntrySelect($event)" [file]="entry"></app-file-gallery-entry>
      </div>
    </cdk-virtual-scroll-viewport>
  </div>
</div>
<app-file-context-menu #fileContextMenu></app-file-context-menu>
