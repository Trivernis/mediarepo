<mat-drawer-container class="page">
  <mat-drawer mode="side" opened disableClose>
    <div fxLayout="column" class="drawer-sidebar-inner">
      <div id="file-search-input" fxFlex="220px">
        <app-file-search #filesearch (searchStartEvent)="contentLoading = true"
                         (searchEndEvent)="contentLoading = false"></app-file-search>
      </div>
      <div id="file-tag-list" fxFlex fxFlexAlign="start" fxFlexFill>
        <h1>Selection Tags</h1>
        <mat-selection-list [multiple]="false" *ngIf="tags.length > 0"
                            (selectionChange)="addSearchTagFromList($event)">
          <mat-list-option
            *ngFor="let tag of tags"
            [value]="tag.getNormalizedOutput()">{{tag.getNormalizedOutput()}}</mat-list-option>
        </mat-selection-list>
      </div>
    </div>
  </mat-drawer>
  <mat-drawer-content>
      <div *ngIf="contentLoading" class="spinner-overlay">
        <mat-progress-spinner color="primary" mode="indeterminate"></mat-progress-spinner>
      </div>
      <app-file-grid *ngIf="!this.showGallery" (fileDblClickEvent)="openGallery($event)" [files]="files"
                     (fileSelectEvent)="onFileSelect($event)"
                     [preselectedFile]="this.preselectedFile"
                     (fileMultiselectEvent)="onFileMultiSelect($event)"
      ></app-file-grid>
      <app-file-gallery *ngIf="this.showGallery" [files]="files" (fileSelectEvent)="onFileSelect($event)"
                        [preselectedFile]="this.preselectedFile"
                        (closeEvent)="this.closeGallery($event.selectedFile?.data)"></app-file-gallery>
  </mat-drawer-content>
</mat-drawer-container>
